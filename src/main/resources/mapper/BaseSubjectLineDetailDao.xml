<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.springBootDemo.dao.mapper.BaseSubjectLineDetailDao">

    <resultMap id="BaseResultMap" type="com.example.springBootDemo.entity.BaseSubjectLineDetail">
        <!--@Table base_subject_line_detail-->
        <result property="id" column="id" jdbcType="INTEGER"/>
        <result property="subLineName" column="sub_line_name" jdbcType="VARCHAR"/>
        <result property="mainBusiness" column="main_business" jdbcType="VARCHAR"/>
        <result property="coreName" column="core_name" jdbcType="VARCHAR"/>
        <result property="helpName" column="help_name" jdbcType="VARCHAR"/>
        <result property="model" column="model" jdbcType="VARCHAR"/>
        <result property="instructions" column="instructions" jdbcType="VARCHAR"/>
        <result property="expect" column="expect" jdbcType="VARCHAR"/>
        <result property="state" column="state" jdbcType="VARCHAR"/>
        <result property="createDate" column="create_date" jdbcType="TIMESTAMP"/>
        <result property="createBy" column="create_by" jdbcType="VARCHAR"/>
        <result property="remark" column="remark" jdbcType="VARCHAR"/>
    </resultMap>

    <select id="getSubjectReport" resultType="com.example.springBootDemo.entity.report.SubjectReport" parameterType="java.lang.String">
        select s.sub_name,s.instructions subInstructions,
            rsl.sub_line_name,rsl.combo,rsl.duration_start,rsl.duration_end,
            sld.main_business,sld.core_name,sld.help_name,sld.model,sld.instructions,sld.create_date
        from base_subject s
        left join base_subject_line rsl on rsl.sub_name=s.sub_name and rsl.state=1
        left join base_subject_line_detail sld on sld.sub_line_name=rsl.sub_line_name and rsl.state=1
            where #{date}  BETWEEN s.duration_start AND s.duration_end
        order by s.sub_name,rsl.sub_line_name,sld.create_date
    </select>

</mapper>

